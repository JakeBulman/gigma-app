{% extends 'main/base.html' %}
{% load static %}

{% block title %}Edit account{% endblock %}
{% block content %}

<script>
    // Script handles the temporary showing of the image before upload
    function previewFile() {
        var preview = document.querySelector('.tempimg');
        var file    = document.querySelector('input[type=file]').files[0];
        var reader  = new FileReader();

        reader.onloadend = function () {
            preview.src = reader.result;
        }

        if (file) {
            reader.readAsDataURL(file);
        } else {
            preview.src = "";
        }
        }
</script>

<div class="flex flex-row gap-8 flex-wrap w-5/6 justify-center">

    <div class="card glass shadow-xl">
        <div class="card-body items-center text-center">
            <h2 class="card-title pb-6">Update</h2>
            <div class="card-actions items-center justify-center">
                <form class="w-full" method="POST" action="{% url 'edit' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" /></svg>
                            <input class="grow border-none" type="text" placeholder="First Name" value="{{ my_profile.user.first_name }}" name="user-first_name" maxlength="150" id="id_user-first_name">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" /></svg>
                            <input class="grow border-none" type="text" placeholder="Last Name" value="{{ my_profile.user.last_name }}" name="user-last_name" maxlength="150" id="id_user-last_name">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path fill-rule="evenodd" d="M17.834 6.166a8.25 8.25 0 1 0 0 11.668.75.75 0 0 1 1.06 1.06c-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788 3.807-3.808 9.98-3.808 13.788 0A9.722 9.722 0 0 1 21.75 12c0 .975-.296 1.887-.809 2.571-.514.685-1.28 1.179-2.191 1.179-.904 0-1.666-.487-2.18-1.164a5.25 5.25 0 1 1-.82-6.26V8.25a.75.75 0 0 1 1.5 0V12c0 .682.208 1.27.509 1.671.3.401.659.579.991.579.332 0 .69-.178.991-.579.3-.4.509-.99.509-1.671a8.222 8.222 0 0 0-2.416-5.834ZM15.75 12a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0Z" clip-rule="evenodd" /></svg>
                            <input class="grow border-none" type="email" placeholder="Email" value="{{ my_profile.user.email }}" name="user-email" maxlength="254" id="id_user-email">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path fill-rule="evenodd" d="M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z" clip-rule="evenodd" /></svg>                              
                            <input class="grow border-none" type="text" placeholder="Stage Name" value="{{ my_profile.stage_name }}" name="profile-stage_name" maxlength="100" id="id_profile-stage_name">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z" clip-rule="evenodd" /></svg>
                            <input class="grow border-none" type="date" value="{{ my_profile.date_of_birth|date:'Y-m-d' }}" name="profile-date_of_birth" id="id_profile-date_of_birth">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path d="M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z" /></svg>                              
                            <input class="grow border-none" autocomplete="off" type="text" placeholder="Website" value="{{ my_profile.website_link }}" name="profile-website_link" id="id_profile-website_link">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <label class="input input-bordered flex items-center gap-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 h-4 w-4 opacity-70"><path d="M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z" /></svg>
                            <input class="grow border-none" type="text" placeholder="Bio" value="{{ my_profile.user_about }}" name="profile-user_about" id="id_profile-user_about">
                        </label>
                    </div>
                    <div class="fieldWrapper justify-content-center align-items-center flex-nowrap">
                        <input class="file-input file-input-sm" onchange="previewFile()" type="file" name="profile-profile_picture" accept="image/*" id="id_profile-profile_picture">
                    </div>
                    {% if my_profile.profile_picture != '' and my_profile != None %}
                    <div class="avatar pt-4">
                        <div class="bg-neutral ring-warning w-24 rounded-full ring ring-offset-0">
                            <img src="{{ my_profile.profile_picture.url }}" class="tempimg" height="200" alt="Image preview...">
                        </div>
                    </div>
                    {% else %}
                    <div class="avatar pt-4">
                        <div class="bg-neutral ring-warning w-24 rounded-full ring ring-offset-0">
                            <img src="{% static 'admin/img/favicon-50.png' %}" class="tempimg" height="200" alt="Image preview...">
                        </div>
                    </div>
                    {% endif %}

                    <button type="submit" class="btn btn-success mt-5 w-full">Confirm</button>
                </form>
                <a class="btn btn-warning mt-5 w-full" href="{% url 'edit_disciplines' %}">Edit Disciplines</a>
            </div>
        </div>
    </div>
</div>

{% endblock %}